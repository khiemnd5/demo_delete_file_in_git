# demo_delete_file_in_git
Demo xoÃ¡ lá»‹ch sá»­ táº­n gá»‘c rá»… 1 file náº¿u Ä‘Ã£ lá»¡ push á»Ÿ nhiá»u commit, nhiá»u branch


ChÃ o cÃ¡c báº¡n,

Blog cháº¯c bá»‹ má»‘c meo máº¥t rá»“i. MÃ¬nh lÆ°á»i viáº¿t quÃ¡ Ã½, hÃ´m nay ráº£nh thá»© 7 nÃªn ngÃ³ qua blog xem tÃ¬nh hÃ¬nh má»i ngÆ°á»i vÃ o blog cÃ³ nhiá»u khÃ´ng ğŸ˜€

Äá»u Ä‘á»u 100 views/ngÃ y lÃ  vui rá»“i =)). Láº¡i tháº¥y chá»§ Ä‘á» Git lÃ  má»i ngÆ°á»i xem nhiá»u nháº¥t nÃªn tá»± dÆ°ng láº¡i nghÄ© ra má»™t váº¥n Ä‘á» mÃ  hÃ´m trÆ°á»›c Ä‘á»“ng nghiá»‡p cÅ© há»i lÃ  **lÃ m tháº¿ nÃ o Ä‘á»ƒ xoÃ¡ táº­n gá»‘c file mÃ  nÃ³ Ä‘Ã£ tá»«ng commit vÃ  push lÃªn github/gitlab/â€¦ file Ä‘Ã³ láº¡i á»Ÿ nhiá»u branchs (nhÃ¡nh)** ná»¯a.

Tháº¥y Ä‘á»“ng nghiá»‡p há»i cÃ¢u nÃ y cÅ©ng hay nÃªn báº¯t Ä‘áº§u mÃ² tÃ¬m, thá»±c ra thÃ¬ cÅ©ng cÃ³ ngÆ°á»i trong cá»™ng Ä‘á»“ng há» cÅ©ng gáº·p pháº£i váº¥n Ä‘á» nÃ y rá»“i. MÃ¬nh thÃ¬ cÅ©ng Ä‘á»c láº¡i cá»§a há» rá»“i giá» chia sáº» láº¡i vá»›i má»i ngÆ°á»i Ä‘Ã¢y.

## TÃ¬nh huá»‘ng lÃ  mÃ¬nh cÃ³ 1 project demo â€œHello Worldâ€ nhÆ° hÃ¬nh:

<!-- wp:image {"id":1536,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image-3.png?w=984" alt="" class="wp-image-1536"/><figcaption>Project demo delete file in git</figcaption></figure>
<!-- /wp:image -->

Project demo delete file in git
3 branch: master, dev1, dev2. Cáº£ 3 branchs nÃ y Ä‘á»u Ä‘ang chá»©a 1 file ActivationTool.zip. File nÃ y vÃ´ tÃ¬nh mÃ¬nh Ä‘Ã£ táº£i lÃªn github vÃ  giá» muá»‘n xoÃ¡ táº­n gá»‘c (xoÃ¡ háº¿t á»Ÿ cÃ¡c commit, cÃ¡c branch) file nÃ y.

<!-- wp:image {"id":1529,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image.png?w=1024" alt="" class="wp-image-1529"/><figcaption>File ActivationTool.zip lá»¡ tay push lÃªn cáº£ 3 branch.</figcaption></figure>
<!-- /wp:image -->

File ActivationTool.zip lá»¡ tay push lÃªn cáº£ 3 branch.
Äáº§u tiÃªn mÃ¬nh nghÄ© lÃ  click chuá»™t pháº£i rá»“i xoÃ¡ file Ä‘Ã³ Ä‘i rá»“i push lÃªn github thÃªm 1 commit ná»¯a lÃ  Ä‘Æ°á»£c (2 nÄƒm trÆ°á»›c sáº½ nghÄ© váº­y =))) ).
<!-- wp:image {"id":1531,"width":580,"height":158,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large is-resized"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image-1.png?w=1024" alt="" class="wp-image-1531" width="580" height="158"/><figcaption>XoÃ¡ file vÃ  push thÃªm 1 commit ná»¯a á»Ÿ master</figcaption></figure>
<!-- /wp:image -->

XoÃ¡ file vÃ  push thÃªm 1 commit ná»¯a á»Ÿ master
Æ , nÃ o Ä‘Ã¢u cÃ³ dá»… cÆ°ng. Git nÃ³ táº¡o commit lÃ  nÃ³ Ä‘Ã£ lÆ°u láº¡i rá»“i. Ã”ng nÃ o muá»‘n láº¥y file nÃ y chá»‰ cáº§n reset lÃ¹i commit lÃ  láº¥y láº¡i Ä‘Æ°á»£c file thÃ´i, cÃ²n chÆ°a nÃ³i tá»›i cÃ¡c branchs khÃ¡c cÅ©ng Ä‘ang cÃ³ file nÃ y ná»¯a. KhÃ´ng lÃ m tháº¿ nÃ y Ä‘Æ°á»£c. Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ trá»‹ trÆ°á»ng há»£p nÃ y.

ÄÃ¢y Ä‘Ã¢y, cÃ¡c báº¡n sá»­ dá»¥ng Ä‘oáº¡n code sau:

## BÆ°á»›c 1: XoÃ¡ file á»Ÿ local

``` git filter-branch --force --index-filter "git rm --cached --ignore-unmatch PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA" --prune-empty --tag-name-filter cat -- --all ```

PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA: Ä‘Æ°á»ng dáº«n cá»§a file cáº§n xoÃ¡ táº­n gá»‘c

Ãp dá»¥ng:

``` git filter-branch --force --index-filter "git rm --cached --ignore-unmatch ActivationTool.zip" --prune-empty --tag-name-filter cat -- --all ```

<!-- wp:image {"id":1538,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image-5.png?w=1024" alt="" class="wp-image-1538"/></figure>
<!-- /wp:image -->
Sau khi thá»±c hiá»‡n cÃ¢u lá»‡nh trÃªn thÃ¬ git nÃ³ sáº½ xoÃ¡ toÃ n bá»™ cÃ¡c file á»Ÿ local trong cÃ¡c branch vÃ  cÃ¡c commit rá»“i.

## BÆ°á»›c 2: XoÃ¡ á»Ÿ remote (hay hiá»ƒu lÃ  trÃªn github, gitlab,â€¦)

Äá»ƒ xoÃ¡ Ä‘Æ°á»£c trÃªn remote thÃ¬ cáº§n push force. Force lÃ  Ã©p remote theo cÃ¡i má»›i máº¥t mÃ  client gá»­i lÃªn. **Khi dÃ¹ng cá» force Ä‘á»ƒ push nÃ y cÃ¡c báº¡n pháº£i quan sÃ¡t, kiá»ƒm tra láº¡i xem cÃ³ Ä‘Ãºng file cÃ¡c báº¡n muá»‘n xoÃ¡ khÃ´ng nhÃ©. KhÃ´ng lÃ  toang Ä‘áº¥y. =))) Sao láº¡i toang háº£? NÃ³ force trÃªn github thÃ¬ nÃ³ xoÃ¡ háº¿t file á»Ÿ cÃ¡c commit, branchs. Nháº§m sang file quan trá»ng thÃ¬ sáº½ ra sao? =)))**

Lá»‡nh push lÃªn remote:

```git push origin --force --all```

<!-- wp:image {"id":1540,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image-6.png?w=826" alt="" class="wp-image-1540"/></figure>
<!-- /wp:image -->
2. Äá»‘i vá»›i cÃ¡c phiÃªn báº£n mÃ  Ä‘Ã£ release thÃ¬ cáº§n force cho cÃ¡c tags á»Ÿ cÃ¡c file phiÃªn báº£n ná»¯a nhÃ©.


```git push origin --force --tags```

<!-- wp:image {"id":1541,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nguyendangkhiemit.files.wordpress.com/2020/10/image-7.png?w=754" alt="" class="wp-image-1541"/></figure>
<!-- /wp:image -->
Váº­y lÃ  ngon rá»“i nhÃ© :3

https://nguyendangkhiemit.wordpress.com/2020/10/03/git-xoa-tan-goc-re-mot-file-da-tung-push-len-github/

Github: https://github.com/khiemnd5/demo_delete_file_in_git

Tham kháº£o:

https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/removing-sensitive-data-from-a-repository

